//
// Generated by JSON2Apex http://json2apex.herokuapp.com/
//
public class QBOEvent {
  /**
   * ID of the event. May be useful in troubleshooting or reporting any errors.
   */
  public String id { get; set; }

  /**
   * GUID value. Can be ignored.
   */
  public String source { get; set; }

  /**
   * Represents the entity and event for the notification.
   * It’s in the format – `namespace.entitytype.eventname.version`
   */
  public String type { get; set; }

  /**
   * `application/json`
   */
  public String datacontenttype { get; set; }

  /**
   * Time of the notification
   */
  public String time_Z { get; set; } // in json: time

  /**
   * The ID of the entity that was changed
   */
  public String intuitentityid { get; set; }

  /**
   * The QuickBooks Online company ID or realm ID
   */
  public String intuitaccountid { get; set; }

  /**
   * Value is always 1. Can be ignored. (according to their docs as of 2025-11-15)
   */
  public String specversion { get; set; }

  /**
   * Can be name-value pairs to represent additional data. Can be ignored if empty.
   * - i have not seen any data come through on this field yet
   */
  public Data data { get; set; }

  public QBOEvent(JSONParser parser) {
    while (parser.nextToken() != System.JSONToken.END_OBJECT) {
      if (parser.getCurrentToken() == System.JSONToken.FIELD_NAME) {
        String text = parser.getText();
        if (parser.nextToken() != System.JSONToken.VALUE_NULL) {
          if (text == 'specversion') {
            specversion = parser.getText();
          } else if (text == 'id') {
            id = parser.getText();
          } else if (text == 'source') {
            source = parser.getText();
          } else if (text == 'type') {
            type = parser.getText();
          } else if (text == 'datacontenttype') {
            datacontenttype = parser.getText();
          } else if (text == 'time') {
            time_Z = parser.getText();
          } else if (text == 'intuitentityid') {
            intuitentityid = parser.getText();
          } else if (text == 'intuitaccountid') {
            intuitaccountid = parser.getText();
          } else if (text == 'data') {
            data = new Data(parser);
          } else {
            System.debug(LoggingLevel.WARN, 'QBOEvent consuming unrecognized property: ' + text);
            consumeObject(parser);
          }
        }
      }
    }
  }

  public class Data {
    /**
     * intuit docs did not specify what name-value pairs would be included here
     * so `example` is basically just a stub for now
     */
    public String example { get; set; }

    public Data(JSONParser parser) {
      while (parser.nextToken() != System.JSONToken.END_OBJECT) {
        if (parser.getCurrentToken() == System.JSONToken.FIELD_NAME) {
          String text = parser.getText();
          if (parser.nextToken() != System.JSONToken.VALUE_NULL) {
            if (text == 'example') {
              example = parser.getText();
            } else {
              System.debug(LoggingLevel.WARN, 'QBOEvent.Data consuming unrecognized property: ' + text);
              consumeObject(parser);
            }
          }
        }
      }
    }
  }

  public static List<QBOEvent> parse(String json) {
    System.JSONParser parser = System.JSON.createParser(json);
    return arrayOfQBOEvent(parser);
  }

  public static void consumeObject(System.JSONParser parser) {
    Integer depth = 0;
    do {
      System.JSONToken curr = parser.getCurrentToken();
      if (curr == System.JSONToken.START_OBJECT || curr == System.JSONToken.START_ARRAY) {
        depth++;
      } else if (curr == System.JSONToken.END_OBJECT || curr == System.JSONToken.END_ARRAY) {
        depth--;
      }
    } while (depth > 0 && parser.nextToken() != null);
  }

  private static List<QBOEvent> arrayOfQBOEvent(System.JSONParser p) {
    List<QBOEvent> res = new List<QBOEvent>();
    if (p.getCurrentToken() == null)
      p.nextToken();
    while (p.nextToken() != System.JSONToken.END_ARRAY) {
      res.add(new QBOEvent(p));
    }
    return res;
  }
}